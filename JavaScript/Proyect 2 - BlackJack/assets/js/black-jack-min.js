const main=(()=>{"use strict";let e=["C","D","H","S"],r=["A","J","Q","K"],t=[],n=0,l=0,i=document.querySelector("#btnNuevo"),a=document.querySelector("#btnPedir"),d=document.querySelector("#btnDetener"),s=document.querySelectorAll("span"),c=document.querySelector(".carts-player"),o=document.querySelector(".cards-crupier"),u=()=>{for(let n=2;n<=10;n++)for(let l of e)t.push(n+l);for(let i of e)for(let a of r)t.push(a+i);return $(t)},$=e=>{for(let r=e.length-1;r>0;r--){let t=Math.floor(Math.random()*(r+1));[e[r],e[t]]=[e[t],e[r]]}return e},_=()=>{if(0===t.length)throw Error("No hay cartas en el deck");return t.pop()},f=e=>{let r=e.substring(0,e.length-1);return isNaN(r)?"A"===r?11:10:parseInt(r)},p=e=>{do{let r=_();if(l+=f(r),s[1].innerText=l,b(r,o),e>21)break}while(l<e&&l<=21);setTimeout(()=>{h()},20)},b=(e,r)=>{let t=document.createElement("img");t.src=`assets/cards/${e}.png`,t.classList="card",r.appendChild(t)},h=()=>{let e;alert(e=l===n?"Empate":n>21||l<=21&&l>n?"Gana el Crupier":"Gana el Jugador")},y=()=>{t=u(),a.addEventListener("click",()=>{let e=_();n+=f(e),s[0].innerText=n,b(e,c),(n>21||21===n)&&(a.disabled=!0,d.disabled=!0,p(n))}),d.addEventListener("click",()=>{d.disabled=!0,a.disabled=!0,p(n)}),i.addEventListener("click",()=>{g()})},g=()=>{t=[],t=u(),a.disabled=!1,d.disabled=!1,s.forEach(e=>e.innerText=0),c.innerHTML="",o.innerHTML="",l=0,n=0};return{init:y}})();main.init();